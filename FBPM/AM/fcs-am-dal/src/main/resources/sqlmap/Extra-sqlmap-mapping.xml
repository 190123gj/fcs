<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- ==========================================================  -->
<!-- Configuration for ibatis sqlmap mapping.                    -->
<!-- ==========================================================  -->

<!-- ============================================================================= -->
<!-- This file is generated by <tt>estate-dalgen</tt>, a DAL (Data Access Layer)  -->
<!-- code generation utility specially developed for <tt>rent</tt> project.     -->
<!--                                                                               -->
<!-- PLEASE DO NOT MODIFY THIS FILE MANUALLY, or else your modification may be     -->
<!-- OVERWRITTEN by someone else. To modify the file, you should go to directory   -->
<!-- <tt>(project-home)/biz/dal/src/conf/dalgen</tt>, and find the corresponding   -->
<!-- configuration files. Modify those files according to your needs, then run     -->
<!-- <tt>estate-dalgen</tt> to generate this file.                                -->
<!--                                                                               -->
<!-- @author peigen                                                             -->
<!-- ============================================================================= -->

<sqlMap namespace="yrd">

    <!-- RESULT MAPS                                   -->
    <!-- ============================================= -->
    <!-- mapped statement for IbatisExtraDAO.getSysdate -->
    <!-- 表单结果通用 -->
    <resultMap id="RM-EXTRA-SIMPLE-FORM" class="com.born.fcs.am.dataobject.SimpleFormDO">
        <result property="formId" column="form_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="formCode" column="form_code" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="formName" column="form_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="formUrl" column="form_url" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="formStatus" column="status" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="detailStatus" column="detail_status" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="actDefId" column="act_def_id" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="actInstId" column="act_inst_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="taskId" column="task_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="runId" column="run_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="defId" column="def_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="formUserId" column="user_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="formUserAccount" column="user_account" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="formUserName" column="user_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="formDeptId" column="form_dept_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="formDeptName" column="form_dept_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="formDeptCode" column="form_dept_code" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="formDeptPath" column="form_dept_path" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="formDeptPathName" column="form_dept_path_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="checkStatus" column="check_status" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="relatedProjectCode" column="related_project_code" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="taskUserData" column="task_user_data" javaType="java.lang.String" jdbcType="TEXT"/>
        <result property="remark" column="remark" javaType="java.lang.String" jdbcType="TEXT"/>
        <result property="trace" column="trace" javaType="java.lang.String" jdbcType="TEXT"/>
        <result property="submitTime" column="submit_time" javaType="java.util.Date" jdbcType="DATETIME"/>
        <result property="finishTime" column="finish_time" javaType="java.util.Date" jdbcType="DATETIME"/>        
        <result property="formAddTime" column="form_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="formUpdateTime" column="form_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>
    <!-- 资产转让 -->
    <resultMap id="RM-ASSETS-TRANSFER-APPLICATION" extends="RM-EXTRA-SIMPLE-FORM" class="com.born.fcs.am.dataobject.AssetsTransferApplicationFormDO">
        <result property="id" column="id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="formId" column="form_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="projectCode" column="project_code" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="projectName" column="project_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="transferPrice" column="transfer_price" javaType="com.yjf.common.lang.util.money.Money" jdbcType="BIGINT"/>
        <result property="transferTime" column="transfer_time" javaType="java.util.Date" jdbcType="DATETIME"/>
         <result property="transfereeCompany" column="transferee_company" javaType="java.lang.String" jdbcType="VARCHAR"/>
         <result property="isToMeet" column="is_to_meet" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="meetType" column="meet_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="isTrusteeLiquidate" column="is_trustee_liquidate" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="liquidateTime" column="liquidate_time" javaType="java.util.Date" jdbcType="DATETIME"/>
        <result property="liquidaterPrice" column="liquidater_price" javaType="com.yjf.common.lang.util.money.Money" jdbcType="BIGINT"/>
        <result property="remark" column="remark" javaType="java.lang.String" jdbcType="TEXT"/>
        <result property="directorsAttach" column="directors_attach" javaType="java.lang.String" jdbcType="TEXT"/>
        <result property="attach" column="attach" javaType="java.lang.String" jdbcType="TEXT"/>
        <result property="sortOrder" column="sort_order" javaType="int" jdbcType="INT" nullValue="0"/>
         <result property="isCloseMessage" column="is_close_message" javaType="java.lang.String" jdbcType="VARCHAR"/>
          <result property="councilApplyId" column="council_apply_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="councilStatus" column="council_status" javaType="java.lang.String" jdbcType="VARCHAR"/>
         <result property="liquidaterStatus" column="liquidater_status" javaType="java.lang.String" jdbcType="VARCHAR"/>
         <result property="councilBack" column="council_back" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>
     <!-- 资产受让 -->
    <resultMap id="RM-ASSETS-TRANSFEREE-APPLICATION" extends="RM-EXTRA-SIMPLE-FORM" class="com.born.fcs.am.dataobject.AssetsTransfereeApplicationFormDO">
        <result property="id" column="id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="formId" column="form_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="projectCode" column="project_code" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="projectName" column="project_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="transfereePrice" column="transferee_price" javaType="com.yjf.common.lang.util.money.Money" jdbcType="BIGINT"/>
        <result property="transfereeTime" column="transferee_time" javaType="java.util.Date" jdbcType="DATETIME"/>
         <result property="transferCompany" column="transfer_company" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="isTrusteeLiquidate" column="is_trustee_liquidate" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="liquidateTime" column="liquidate_time" javaType="java.util.Date" jdbcType="DATETIME"/>
        <result property="liquidaterPrice" column="liquidater_price" javaType="com.yjf.common.lang.util.money.Money" jdbcType="BIGINT"/>
        <result property="remark" column="remark" javaType="java.lang.String" jdbcType="TEXT"/>
        <result property="attach" column="attach" javaType="java.lang.String" jdbcType="TEXT"/>
        <result property="sortOrder" column="sort_order" javaType="int" jdbcType="INT" nullValue="0"/>
         <result property="isCloseMessage" column="is_close_message" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>
      <!-- 评估公司申请单 -->
    <resultMap id="RM-ASSETS-COMPANY-APPLY" extends="RM-EXTRA-SIMPLE-FORM" class="com.born.fcs.am.dataobject.AssessCompanyApplyFormDO">
        <result property="id" column="id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="formId" column="form_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="projectCode" column="project_code" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="projectName" column="project_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="customerId" column="customer_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="customerName" column="customer_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="customerType" column="customer_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="customerAddr" column="customer_addr" javaType="java.lang.String" jdbcType="VARCHAR"/>
       <result property="countryName" column="country_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="countryCode" column="country_code" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="provinceCode" column="province_code" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="provinceName" column="province_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="cityCode" column="city_code" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="cityName" column="city_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="countyCode" column="county_code" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="countyName" column="county_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="qualityLand" column="quality_land" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="qualityHouse" column="quality_house" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="qualityAssets" column="quality_assets" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="appointPerson" column="appoint_person" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="appointPersonAccount" column="appoint_person_account" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="appointPersonName" column="appoint_person_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="appointWay" column="appoint_way" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="appointRemark" column="appoint_remark" javaType="java.lang.String" jdbcType="TEXT"/>
        <result property="companyId" column="company_id" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="companyName" column="company_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="applyStatus" column="apply_status" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="beReplacedId" column="be_replaced_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="replacedId" column="replaced_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>
    <!-- 文字信息自定义 -->
     <resultMap id="RM-PLEDGE-TEXT-CUSTOM" class="com.born.fcs.am.dal.dataobject.PledgeTextCustomDO">
        <result property="textId" column="text_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="typeId" column="type_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="fieldName" column="field_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="fieldNameDesc" column="field_name_desc" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="fieldType" column="field_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="controlLength" column="control_length" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="measurementUnit" column="measurement_unit" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="mostCompleteSelection" column="most_complete_selection" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="timeSelectionRange" column="time_selection_range" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="conditionItem" column="condition_item" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="relationConditionItem" column="relation_condition_item" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="relationFieldName" column="relation_field_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="isRequired" column="is_required" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="latestEntryForm" column="latest_entry_form" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="isByRelation" column="is_by_relation" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="sortOrder" column="sort_order" javaType="int" jdbcType="INT" nullValue="0"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>
    <!-- 图像信息 -->
    <resultMap id="RM-PLEDGE-IMAGE-CUSTOM" class="com.born.fcs.am.dal.dataobject.PledgeImageCustomDO">
        <result property="imageId" column="image_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="typeId" column="type_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="fieldName" column="field_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="attachmentFormat" column="attachment_format" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="isRequired" column="is_required" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="latestEntryForm" column="latest_entry_form" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="sortOrder" column="sort_order" javaType="int" jdbcType="INT" nullValue="0"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>
     <!-- 资产网络信息  -->
    <resultMap id="RM-PLEDGE-NETWORK-CUSTOM" class="com.born.fcs.am.dal.dataobject.PledgeNetworkCustomDO">
        <result property="networkId" column="network_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="typeId" column="type_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="websiteName" column="website_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="websiteAddr" column="website_addr" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>
    <!-- 资产文字信息属性 -->
    <resultMap id="RM-PLEDGE-TYPE-ATTRIBUTE-TEXT" extends="RM-PLEDGE-TEXT-CUSTOM" class="com.born.fcs.am.dataobject.PledgeTypeAttributeTextDO">
        <result property="attributeId" column="attribute_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="assetsId" column="assets_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="typeId" column="type_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="attributeKey" column="attribute_key" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="attributeValue" column="attribute_value" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="customType" column="custom_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>
     <!-- 资产图像信息属性 -->
    <resultMap id="RM-PLEDGE-TYPE-ATTRIBUTE-IMAGE" extends="RM-PLEDGE-IMAGE-CUSTOM" class="com.born.fcs.am.dataobject.PledgeTypeAttributeImageDO">
        <result property="attributeId" column="attribute_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="assetsId" column="assets_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="typeId" column="type_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="attributeKey" column="attribute_key" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="attributeValue" column="attribute_value" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="customType" column="custom_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>
   <!-- 资产网络信息属性 -->
    <resultMap id="RM-PLEDGE-TYPE-ATTRIBUTE-NETWORK" extends="RM-PLEDGE-NETWORK-CUSTOM" class="com.born.fcs.am.dataobject.PledgeTypeAttributeNetworkDO">
        <result property="attributeId" column="attribute_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="assetsId" column="assets_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="typeId" column="type_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="attributeKey" column="attribute_key" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="attributeValue" column="attribute_value" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="customType" column="custom_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>
    
    <resultMap id="RM-ASSET-SIMPLE" class="com.born.fcs.am.dataobject.AssetSimpleDO">
        <result property="assetsId" column="assets_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="typeId" column="type_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="assetType" column="asset_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="assetTypeDesc" column="asset_type_desc" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="ownershipId" column="ownership_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="ownershipName" column="ownership_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="isCustomer" column="is_customer" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="warrantNo" column="warrant_no" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="evaluationPrice" column="evaluation_price" javaType="com.yjf.common.lang.util.money.Money" jdbcType="BIGINT"/>
        <result property="status" column="status" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="pledgeRate" column="pledge_rate" javaType="double" jdbcType="DECIMAL" nullValue="0"/>
        <result property="mortgagePrice" column="mortgage_price" javaType="com.yjf.common.lang.util.money.Money" jdbcType="BIGINT"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>
        
    <select id="MS-COMMON-GET-SYSDATE" resultClass="java.util.Date">
        <![CDATA[
			select current_timestamp from dual
		]]>
    </select>
    <!-- 表单部分通用SQl -->
    <sql id="formCommonSql">
    	f.form_id, f.form_code, f.form_name,f.form_url,f.act_inst_id,f.run_id,f.def_id,f.act_def_id,f.task_id,f.detail_status,f.status, f.user_id, f.user_account,f.user_name, f.dept_id form_dept_id, f.dept_name form_dept_name,f.dept_code form_dept_code,f.dept_path form_dept_path,f.dept_path_name form_dept_path_name,f.check_status, f.submit_time, f.finish_time, f.raw_add_time form_add_time, f.raw_update_time form_update_time,f.related_project_code,f.task_user_data,f.remark,f.trace
    </sql>
    <!-- 项目信息通用 -->
    <sql id="projectCommonSql">
    	p.project_id,p.project_code,p.project_name, p.customer_id, p.customer_name, p.customer_type,p.time_limit,p.time_unit,p.busi_type,p.busi_type_name,p.amount,p.busi_manager_id, p.busi_manager_name, p.busi_managerb_id, p.busi_managerb_name, p.dept_id project_dept_id, p.dept_name project_dept_name,p.dept_code project_dept_code,p.dept_path project_dept_path,p.dept_path_name project_dept_path_name,p.raw_add_time project_add_time, p.raw_update_time project_update_time
    </sql> 
    <!-- 简单项目信息 -->
    <sql id="projectCommonSimpleSql">
    	p.project_code,p.project_name, p.customer_id, p.customer_name, p.customer_type,p.time_limit,p.time_unit,p.busi_type,p.busi_type_name,p.amount, p.status project_status
    </sql> 
    <!-- 项目权限通用sql -->
    <!-- 项目权限通用sql -->
    <sql id="projectPermissionSql">
	      <isNotEmpty property="deptIdList">
	            JOIN (SELECT COUNT(*) rnum,project_code FROM project_related_user
	            	   WHERE is_del = 'NO' AND 
	            	   		(dept_id in 
	            	   		<iterate property="deptIdList" open="(" close=")" conjunction=",">
								#deptIdList[]#
							</iterate>
					 		<isGreaterThan property="loginUserId"  compareValue="0" prepend=" OR ">
			            	    (user_id = #loginUserId# 
						      	<isNotEmpty property="relatedRoleList" prepend=" and ">
						      		user_type in 
			            	   		<iterate property="relatedRoleList" open="(" close=")" conjunction=",">
										#relatedRoleList[]#
									</iterate>
						      	</isNotEmpty>)  	            	   
						    </isGreaterThan>)
					   GROUP BY project_code) rl
    			  ON rl.project_code = p.project_code AND rl.rnum > 0
	      </isNotEmpty>
	      <isEmpty property="deptIdList">    
	 		  <isGreaterThan property="loginUserId"  compareValue="0">
		            JOIN (SELECT COUNT(*) rnum,project_code FROM project_related_user 
		            	   WHERE user_id = #loginUserId# AND is_del = 'NO'
					      	<isNotEmpty property="relatedRoleList" prepend=" and ">
					      		user_type in 
		            	   		<iterate property="relatedRoleList" open="(" close=")" conjunction=",">
									#relatedRoleList[]#
								</iterate>
					      	</isNotEmpty>  	            	   
		            	   GROUP BY project_code) rl
	    			  ON rl.project_code = p.project_code AND rl.rnum > 0
		      </isGreaterThan>
	      </isEmpty>   	
          <isGreaterThan property="busiManagerId"  compareValue="0">
            JOIN (SELECT COUNT(*) rnum,project_code FROM project_related_user 
            	   WHERE user_id = #busiManagerId# AND user_type = 'BUSI_MANAGER' AND is_current = 'IS' AND is_del = 'NO'  GROUP BY project_code) r1
   			  ON r1.project_code = p.project_code AND r1.rnum > 0
      	  </isGreaterThan>
          <isGreaterThan property="busiManagerbId"  compareValue="0">
            JOIN (SELECT COUNT(*) rnum,project_code FROM project_related_user 
            	   WHERE user_id = #busiManagerbId# AND user_type = 'BUSI_MANAGERB' AND is_current = 'IS' AND is_del = 'NO'  GROUP BY project_code) r2
   			  ON r2.project_code = p.project_code AND r2.rnum > 0
      	  </isGreaterThan>	           
    </sql>
    
    <!-- 表单权限通用sql -->
   <sql id="formPermissionSql">
	    <isNotEmpty property="deptIdList">
            JOIN (SELECT COUNT(*) rnum,form_id FROM form_related_user
            	   WHERE dept_id in 
            	   		<iterate property="deptIdList" open="(" close=")" conjunction=",">
							#deptIdList[]#
						</iterate>
						<isGreaterThan property="loginUserId"  compareValue="0" prepend=" OR ">
							user_id = #loginUserId#
						</isGreaterThan>
				   GROUP BY form_id) rl
   			  ON rl.form_id = f.form_id AND rl.rnum > 0
	    </isNotEmpty>     
    	<isEmpty property="deptIdList">
 		  <isGreaterThan property="loginUserId"  compareValue="0">
	            JOIN (SELECT COUNT(*) rnum,form_id FROM form_related_user 
	            	   WHERE user_id = #loginUserId# GROUP BY form_id) rl
    			  ON rl.form_id = f.form_id AND rl.rnum > 0
	      </isGreaterThan>
	    </isEmpty>    	
    </sql>   
    
    <!-- 资产属性  文字信息属性查询 -->
    <select id="MS-EXTRA-FORM-PLEDGE-TYPE-ATTRIBUTE-TEXT-SEARCH" resultMap="RM-PLEDGE-TYPE-ATTRIBUTE-TEXT">
 		SELECT pta.*,ptc.* FROM pledge_type_attribute pta 
 			 LEFT JOIN pledge_text_custom ptc ON pta.type_id = ptc.type_id AND pta.attribute_key = ptc.field_name
  			WHERE 1=1
		<dynamic>
			<isGreaterThan property="assetsId"  compareValue="0" prepend=" and ">
	               assets_id = #assetsId#
	          </isGreaterThan>
	          <isGreaterThan property="typeId"  compareValue="0" prepend=" and ">
	               pta.type_id = #typeId#
	          </isGreaterThan>
			<isNotEmpty property="attributeKey" prepend=" and ">
				pta.attribute_key =#attributeKey#
			</isNotEmpty>
			<isNotEmpty property="customType" prepend=" and ">
				pta.custom_type =#customType#
			</isNotEmpty>
			<isNotEmpty property="isByRelation" prepend=" and ">
				ptc.is_by_relation =#isByRelation#
			</isNotEmpty>			
	
			<isNotEmpty property="fieldType" prepend=" and ">
				ptc.field_type =#fieldType#
			</isNotEmpty>
	
		</dynamic>
		<isNotEmpty property="sortCol" prepend=" order by ">
		    $sortCol$
	        <isNotEmpty property="sortOrder">
		    	 $sortOrder$
	   		</isNotEmpty>
		</isNotEmpty>
		<isEmpty property="sortCol" prepend=" ">
		    ORDER BY ptc.sort_order 
		</isEmpty>
		<isGreaterThan property="pageSize" compareValue="0" prepend="">
			LIMIT #limitStart#,#pageSize#;
		</isGreaterThan>
    </select>
    
   	<!-- 资产属性  文字信息属性查询 统计 -->
	<select id="MS-EXTRA-FORM-PLEDGE-TYPE-ATTRIBUTE-TEXT-COUNT" resultClass="long">
		SELECT count(*)
		FROM pledge_type_attribute pta 
 			 LEFT JOIN pledge_text_custom ptc ON pta.type_id = ptc.type_id AND pta.attribute_key = ptc.field_name
  			WHERE 1=1
		<dynamic>
			<isGreaterThan property="assetsId"  compareValue="0" prepend=" and ">
	               assets_id = #assetsId#
	          </isGreaterThan>
	          <isGreaterThan property="typeId"  compareValue="0" prepend=" and ">
	               pta.type_id = #typeId#
	          </isGreaterThan>
			<isNotEmpty property="attributeKey" prepend=" and ">
				pta.attribute_key =#attributeKey#
			</isNotEmpty>
			<isNotEmpty property="customType" prepend=" and ">
				pta.custom_type =#customType#
			</isNotEmpty>
			<isNotEmpty property="isByRelation" prepend=" and ">
				ptc.is_by_relation =#isByRelation#
			</isNotEmpty>			
		
			<isNotEmpty property="fieldType" prepend=" and ">
				ptc.field_type =#fieldType#
			</isNotEmpty>
		
		</dynamic>
	</select>  
	<!-- 资产属性  图像信息属性查询 -->
    <select id="MS-EXTRA-FORM-PLEDGE-TYPE-ATTRIBUTE-IMAGE-SEARCH" resultMap="RM-PLEDGE-TYPE-ATTRIBUTE-IMAGE">
 		SELECT pta.*,ptc.* FROM pledge_type_attribute pta 
 			 LEFT JOIN pledge_image_custom ptc ON pta.type_id = ptc.type_id AND pta.attribute_key = ptc.field_name
  			WHERE 1=1
		<dynamic>
			<isGreaterThan property="assetsId"  compareValue="0" prepend=" and ">
	               assets_id = #assetsId#
	          </isGreaterThan>
	          <isGreaterThan property="typeId"  compareValue="0" prepend=" and ">
	               pta.type_id = #typeId#
	          </isGreaterThan>
			<isNotEmpty property="attributeKey" prepend=" and ">
				pta.attribute_key =#attributeKey#
			</isNotEmpty>
			<isNotEmpty property="customType" prepend=" and ">
				pta.custom_type =#customType#
			</isNotEmpty>			
			<isNotEmpty property="latestEntryForm" prepend=" and ">
				ptc.latest_entry_form =#latestEntryForm#
			</isNotEmpty>
			<isNotEmpty property="fieldName" prepend=" and ">
				ptc.field_name =#fieldName#
			</isNotEmpty>

		</dynamic>
		<isNotEmpty property="sortCol" prepend=" order by ">
		    $sortCol$
	        <isNotEmpty property="sortOrder">
		    	 $sortOrder$
	   		</isNotEmpty>
		</isNotEmpty>
		<isEmpty property="sortCol" prepend=" ">
		    ORDER BY ptc.sort_order 
		</isEmpty>
		<isGreaterThan property="pageSize" compareValue="0" prepend="">
			LIMIT #limitStart#,#pageSize#;
		</isGreaterThan>
    </select>
    
   	<!-- 资产属性  图像信息属性查询 统计 -->
	<select id="MS-EXTRA-FORM-PLEDGE-TYPE-ATTRIBUTE-IMAGE-COUNT" resultClass="long">
		SELECT count(*)
		FROM pledge_type_attribute pta 
 			 LEFT JOIN pledge_image_custom ptc ON pta.type_id = ptc.type_id AND pta.attribute_key = ptc.field_name
  			WHERE 1=1
		<dynamic>
				<isGreaterThan property="assetsId"  compareValue="0" prepend=" and ">
	               assets_id = #assetsId#
	          </isGreaterThan>
	          <isGreaterThan property="typeId"  compareValue="0" prepend=" and ">
	               pta.type_id = #typeId#
	          </isGreaterThan>
			<isNotEmpty property="attributeKey" prepend=" and ">
				pta.attribute_key =#attributeKey#
			</isNotEmpty>
			<isNotEmpty property="customType" prepend=" and ">
				pta.custom_type =#customType#
			</isNotEmpty>			
			<isNotEmpty property="latestEntryForm" prepend=" and ">
				ptc.latest_entry_form =#latestEntryForm#
			</isNotEmpty>
			<isNotEmpty property="fieldName" prepend=" and ">
				ptc.field_name =#fieldName#
			</isNotEmpty>
		</dynamic>
	</select>  
	<!-- 资产属性  网络信息属性查询 -->
    <select id="MS-EXTRA-FORM-PLEDGE-TYPE-ATTRIBUTE-NETWORK-SEARCH" resultMap="RM-PLEDGE-TYPE-ATTRIBUTE-NETWORK">
 		SELECT pta.*,ptc.* FROM pledge_type_attribute pta 
 			 LEFT JOIN pledge_network_custom ptc ON pta.type_id = ptc.type_id AND pta.attribute_key = ptc.website_name
  			WHERE 1=1
		<dynamic>
				<isGreaterThan property="assetsId"  compareValue="0" prepend=" and ">
	               assets_id = #assetsId#
	          </isGreaterThan>
	          <isGreaterThan property="typeId"  compareValue="0" prepend=" and ">
	               pta.type_id = #typeId#
	          </isGreaterThan>
			<isNotEmpty property="attributeKey" prepend=" and ">
				pta.attribute_key =#attributeKey#
			</isNotEmpty>
			<isNotEmpty property="customType" prepend=" and ">
				pta.custom_type =#customType#
			</isNotEmpty>			

			<isNotEmpty property="websiteName" prepend=" and ">
				ptc.website_name =#websiteName#
			</isNotEmpty>

		</dynamic>
		<isNotEmpty property="sortCol" prepend=" order by ">
		    $sortCol$
	        <isNotEmpty property="sortOrder">
		    	 $sortOrder$
	   		</isNotEmpty>
		</isNotEmpty>
		<isEmpty property="sortCol" prepend=" ">
		    ORDER BY ptc.network_id 
		</isEmpty>
		<isGreaterThan property="pageSize" compareValue="0" prepend="">
			LIMIT #limitStart#,#pageSize#;
		</isGreaterThan>
    </select>
    
   	<!-- 资产属性  网络信息属性查询 统计 -->
	<select id="MS-EXTRA-FORM-PLEDGE-TYPE-ATTRIBUTE-NETWORK-COUNT" resultClass="long">
		SELECT count(*)
		FROM pledge_type_attribute pta 
 			 LEFT JOIN pledge_network_custom ptc ON pta.type_id = ptc.type_id AND pta.attribute_key = ptc.website_name
  			WHERE 1=1
		<dynamic>
				<isGreaterThan property="assetsId"  compareValue="0" prepend=" and ">
	               assets_id = #assetsId#
	          </isGreaterThan>
	          <isGreaterThan property="typeId"  compareValue="0" prepend=" and ">
	               pta.type_id = #typeId#
	          </isGreaterThan>
			<isNotEmpty property="attributeKey" prepend=" and ">
				pta.attribute_key =#attributeKey#
			</isNotEmpty>
			<isNotEmpty property="customType" prepend=" and ">
				pta.custom_type =#customType#
			</isNotEmpty>			

			<isNotEmpty property="websiteName" prepend=" and ">
				ptc.website_name =#websiteName#
			</isNotEmpty>
		</dynamic>
	</select>  
	<!--  资产转让申请 表单项目列表 -->
    <select id="MS-EXTRA-FORM-ASSETS-TRANSFER-APPLICATION-SEARCH" resultMap="RM-ASSETS-TRANSFER-APPLICATION">
		     SELECT p.*,f.status as form_status,<include refid="formCommonSql"/>
     FROM f_assets_transfer_application p
 		   LEFT JOIN form f ON f.form_id = p.form_id
   		<include refid="projectPermissionSql"/>
		 WHERE 1=1 AND f.status!="DELETED" AND (f.status != 'DRAFT' OR f.user_id = #draftUserId#)	 
		<dynamic>
			<isGreaterThan property="formId"  compareValue="0" prepend=" and ">
	               f.form_id = #formId#
	          </isGreaterThan>
			<isNotEmpty property="projectName" prepend=" and ">
				p.project_name like concat('%',#projectName#,'%')
			</isNotEmpty>
			<isNotEmpty property="projectCode" prepend=" and ">
				p.project_code like concat('%',#projectCode#,'%')
			</isNotEmpty>			
	         <isNotEmpty property="formStatus" prepend=" and ">
				f.status = #formStatus#
			</isNotEmpty>
			<isNotEmpty property="formUserName" prepend=" and ">
				f.user_name = #formUserName#
			</isNotEmpty>
			<isNotEmpty property="isTrusteeLiquidate" prepend=" and ">
				p.is_trustee_liquidate = #isTrusteeLiquidate#
			</isNotEmpty>
			<isNotEmpty property="isToMeet" prepend=" and ">
				p.is_to_meet = #isToMeet#
			</isNotEmpty>
			<isNotEmpty property="councilStatus" prepend=" and ">
				p.council_status = #councilStatus#
			</isNotEmpty>
			<isNotEmpty property="liquidateTimeStart" prepend=" and ">
	              <![CDATA[p.liquidate_time >= #liquidateTimeStart#]]>
	         </isNotEmpty>
	         <isNotEmpty property="liquidateTimeEnd" prepend=" and ">
	             <![CDATA[p.liquidate_time <= #liquidateTimeEnd#]]>
	          </isNotEmpty>
		</dynamic>
		GROUP BY p.id
		<isNotEmpty property="sortCol" prepend=" order by ">
		    $sortCol$
		       <isNotEmpty property="sortOrder">
		    	 		$sortOrder$
		   		</isNotEmpty>
		</isNotEmpty>
		<isGreaterThan property="pageSize" compareValue="0" prepend="">
			LIMIT #limitStart#,#pageSize#;
		</isGreaterThan>
    </select>
    
   <!-- 资产转让申请单项目列表统计 -->
	<select id="MS-EXTRA-FORM-ASSETS-TRANSFER-APPLICATION-SEARCH-COUNT" resultClass="long">
		  SELECT count(*) FROM
		f_assets_transfer_application p
 		   LEFT JOIN form f ON f.form_id = p.form_id
   		<include refid="projectPermissionSql"/>
		 WHERE 1=1 AND f.status!="DELETED" AND (f.status != 'DRAFT' OR f.user_id = #draftUserId#)
		<dynamic>
			<isGreaterThan property="formId"  compareValue="0" prepend=" and ">
	               f.form_id = #formId#
	          </isGreaterThan>
			<isNotEmpty property="projectName" prepend=" and ">
				p.project_name like concat('%',#projectName#,'%')
			</isNotEmpty>
			<isNotEmpty property="projectCode" prepend=" and ">
				p.project_code like concat('%',#projectCode#,'%')
			</isNotEmpty>			
	         <isNotEmpty property="formStatus" prepend=" and ">
				f.status = #formStatus#
			</isNotEmpty>
			<isNotEmpty property="formUserName" prepend=" and ">
				f.user_name = #formUserName#
			</isNotEmpty>
			<isNotEmpty property="isToMeet" prepend=" and ">
				p.is_to_meet = #isToMeet#
			</isNotEmpty>
			<isNotEmpty property="councilStatus" prepend=" and ">
				p.council_status = #councilStatus#
			</isNotEmpty>			
			<isNotEmpty property="isTrusteeLiquidate" prepend=" and ">
				p.is_trustee_liquidate = #isTrusteeLiquidate#
			</isNotEmpty>
			<isNotEmpty property="liquidateTimeStart" prepend=" and ">
	              <![CDATA[p.liquidate_time >= #liquidateTimeStart#]]>
	         </isNotEmpty>
	         <isNotEmpty property="liquidateTimeEnd" prepend=" and ">
	             <![CDATA[p.liquidate_time <= #liquidateTimeEnd#]]>
	          </isNotEmpty>
		</dynamic>
	</select>
	
	<!--  资产受让申请 表单项目列表 -->
    <select id="MS-EXTRA-FORM-ASSETS-TRANSFEREE-APPLICATION-SEARCH" resultMap="RM-ASSETS-TRANSFEREE-APPLICATION">
		     SELECT p.*,f.status as form_status,<include refid="formCommonSql"/>
     FROM f_assets_transferee_application p
 		   LEFT JOIN form f ON f.form_id = p.form_id
 		   <include refid="formPermissionSql"/>
		 WHERE 1=1 AND f.status!="DELETED" AND (f.status != 'DRAFT' OR f.user_id = #draftUserId#)
		<dynamic>
			<isNotEmpty property="projectName" prepend=" and ">
				p.project_name like concat('%',#projectName#,'%')
			</isNotEmpty>
			<isNotEmpty property="projectCode" prepend=" and ">
				p.project_code like concat('%',#projectCode#,'%')
			</isNotEmpty>			
	         <isNotEmpty property="formStatus" prepend=" and ">
				f.status = #formStatus#
			</isNotEmpty>
			<isNotEmpty property="formUserName" prepend=" and ">
				f.user_name = #formUserName#
			</isNotEmpty>
			<isNotEmpty property="isTrusteeLiquidate" prepend=" and ">
				p.is_trustee_liquidate = #isTrusteeLiquidate#
			</isNotEmpty>
			<isNotEmpty property="liquidateTimeStart" prepend=" and ">
	              <![CDATA[p.liquidate_time >= #liquidateTimeStart#]]>
	         </isNotEmpty>
	         <isNotEmpty property="liquidateTimeEnd" prepend=" and ">
	             <![CDATA[p.liquidate_time <= #liquidateTimeEnd#]]>
	          </isNotEmpty>
		</dynamic>
		GROUP BY p.id
		<isNotEmpty property="sortCol" prepend=" order by ">
		    $sortCol$
		       <isNotEmpty property="sortOrder">
		    	 		$sortOrder$
		   		</isNotEmpty>
		</isNotEmpty>
		<isGreaterThan property="pageSize" compareValue="0" prepend="">
			LIMIT #limitStart#,#pageSize#;
		</isGreaterThan>
    </select>
    
   <!-- 资产受让申请单项目列表统计 -->
	<select id="MS-EXTRA-FORM-ASSETS-TRANSFEREE-APPLICATION-SEARCH-COUNT" resultClass="long">
		  SELECT count(*) FROM
		f_assets_transferee_application p
 		   LEFT JOIN form f ON f.form_id = p.form_id
 		    <include refid="formPermissionSql"/>
		 WHERE 1=1 AND f.status!="DELETED" AND (f.status != 'DRAFT' OR f.user_id = #draftUserId#)
		<dynamic>
			<isNotEmpty property="projectName" prepend=" and ">
				p.project_name like concat('%',#projectName#,'%')
			</isNotEmpty>
			<isNotEmpty property="projectCode" prepend=" and ">
				p.project_code like concat('%',#projectCode#,'%')
			</isNotEmpty>			

	         <isNotEmpty property="formStatus" prepend=" and ">
				f.status = #formStatus#
			</isNotEmpty>
			<isNotEmpty property="formUserName" prepend=" and ">
				f.user_name = #formUserName#
			</isNotEmpty>
			<isNotEmpty property="isTrusteeLiquidate" prepend=" and ">
				p.is_trustee_liquidate = #isTrusteeLiquidate#
			</isNotEmpty>
			<isNotEmpty property="liquidateTimeStart" prepend=" and ">
	              <![CDATA[p.liquidate_time >= #liquidateTimeStart#]]>
	         </isNotEmpty>
	         <isNotEmpty property="liquidateTimeEnd" prepend=" and ">
	             <![CDATA[p.liquidate_time <= #liquidateTimeEnd#]]>
	          </isNotEmpty>
		</dynamic>
	</select>
	<!--  资产受让申请单   项目选择 列表 (选择资产转让的项目)-->
    <select id="MS-EXTRA-FORM-ASSETS-TRANSFEREE-APPLICATION-PROJECT-SEARCH" resultMap="RM-ASSETS-TRANSFER-APPLICATION">
		     SELECT p.*,f.status as form_status,<include refid="formCommonSql"/>
		      FROM f_assets_transfer_application p
		     LEFT JOIN form f ON f.form_id = p.form_id
		     <include refid="projectPermissionSql"/>
       where p.project_code NOT IN (select ta.project_code from f_assets_transferee_application ta LEFT JOIN form f ON f.form_id =ta.form_id WHERE ta.project_code IS NOT NULL and f.status!="APPROVAL") 
		 and 1=1 AND f.status!="DELETED" and (p.is_to_meet="NO" or (p.is_to_meet="IS" and p.council_status='COUNCIL_APPROVAL' AND p.is_charge = 'IS'))
		<dynamic>
			<isNotEmpty property="projectName" prepend=" and ">
				p.project_name like concat('%',#projectName#,'%')
			</isNotEmpty>
			<isNotEmpty property="projectCode" prepend=" and ">
				p.project_code like concat('%',#projectCode#,'%')
			</isNotEmpty>	
			<isNotEmpty property="transfereeCompany" prepend=" and ">
				p.transferee_company like concat('%',#transfereeCompany#,'%')
			</isNotEmpty>		
	         <isNotEmpty property="formStatus" prepend=" and ">
				f.status = #formStatus#
			</isNotEmpty>
			<isNotEmpty property="formUserName" prepend=" and ">
				f.user_name = #formUserName#
			</isNotEmpty>
			<isNotEmpty property="isTrusteeLiquidate" prepend=" and ">
				p.is_trustee_liquidate = #isTrusteeLiquidate#
			</isNotEmpty>
			<isNotEmpty property="liquidaterStatus" prepend=" and ">
				p.liquidater_status = #liquidaterStatus#
			</isNotEmpty>
			<isNotEmpty property="liquidateTimeStart" prepend=" and ">
	              <![CDATA[p.liquidate_time >= #liquidateTimeStart#]]>
	         </isNotEmpty>
	         <isNotEmpty property="liquidateTimeEnd" prepend=" and ">
	             <![CDATA[p.liquidate_time <= #liquidateTimeEnd#]]>
	          </isNotEmpty>
		</dynamic>
		<isNotEmpty property="sortCol" prepend=" order by ">
		    $sortCol$
		       <isNotEmpty property="sortOrder">
		    	 		$sortOrder$
		   		</isNotEmpty>
		</isNotEmpty>
		<isGreaterThan property="pageSize" compareValue="0" prepend="">
			LIMIT #limitStart#,#pageSize#;
		</isGreaterThan>
    </select>
    
   <!-- 资产受让申请单  选择项目列表统计 (选择资产转让的项目)-->
	<select id="MS-EXTRA-FORM-ASSETS-TRANSFEREE-APPLICATION-PROJECT-SEARCH-COUNT" resultClass="long">
		  SELECT count(*) from
		      (select p.project_code FROM f_assets_transfer_application p
		     LEFT JOIN form f ON f.form_id = p.form_id
		     <include refid="projectPermissionSql"/>
      where p.project_code NOT IN (select ta.project_code from f_assets_transferee_application ta LEFT JOIN form f ON f.form_id =ta.form_id WHERE ta.project_code IS NOT NULL and f.status!="APPROVAL") 
		 and 1=1 AND f.status!="DELETED" and (p.is_to_meet="NO" or (p.is_to_meet="IS" and p.council_status='COUNCIL_APPROVAL' AND p.is_charge = 'IS'))
          
		<dynamic>
			<isNotEmpty property="projectName" prepend=" and ">
				p.project_name like concat('%',#projectName#,'%')
			</isNotEmpty>
			<isNotEmpty property="projectCode" prepend=" and ">
				p.project_code like concat('%',#projectCode#,'%')
			</isNotEmpty>			
			<isNotEmpty property="transfereeCompany" prepend=" and ">
				p.transferee_company like concat('%',#transfereeCompany#,'%')
			</isNotEmpty>
	         <isNotEmpty property="formStatus" prepend=" and ">
				f.status = #formStatus#
			</isNotEmpty>
			<isNotEmpty property="formUserName" prepend=" and ">
				f.user_name = #formUserName#
			</isNotEmpty>
			<isNotEmpty property="isTrusteeLiquidate" prepend=" and ">
				p.is_trustee_liquidate = #isTrusteeLiquidate#
			</isNotEmpty>
			<isNotEmpty property="liquidaterStatus" prepend=" and ">
				p.liquidater_status = #liquidaterStatus#
			</isNotEmpty>
			<isNotEmpty property="liquidateTimeStart" prepend=" and ">
	              <![CDATA[p.liquidate_time >= #liquidateTimeStart#]]>
	         </isNotEmpty>
	         <isNotEmpty property="liquidateTimeEnd" prepend=" and ">
	             <![CDATA[p.liquidate_time <= #liquidateTimeEnd#]]>
	          </isNotEmpty>
		</dynamic>
		GROUP BY p.project_code) a;
	</select>
		<!--  评估公司申请单列表 -->
    <select id="MS-EXTRA-FORM-ASSETS-COMPANY-APPLY-SEARCH" resultMap="RM-ASSETS-COMPANY-APPLY">
		     SELECT p.*,f.status as form_status,<include refid="formCommonSql"/>
     FROM f_assess_company_apply p
 		   LEFT JOIN form f ON f.form_id = p.form_id
   		<include refid="projectPermissionSql"/>
		 WHERE 1=1 AND f.status!="DELETED" AND (f.status != 'DRAFT' OR f.user_id = #draftUserId#)
		<dynamic>
	        <isGreaterThan property="formId" compareValue="0" prepend=" and ">
	            p.form_id = #formId#
	        </isGreaterThan>			
			<isNotEmpty property="projectName" prepend=" and ">
				p.project_name like concat('%',#projectName#,'%')
			</isNotEmpty>
			<isNotEmpty property="projectCode" prepend=" and ">
				p.project_code like concat('%',#projectCode#,'%')
			</isNotEmpty>
			<isNotEmpty property="customerName" prepend=" and ">
				p.customer_name like concat('%',#customerName#,'%')
			</isNotEmpty>			
	         <isNotEmpty property="formStatus" prepend=" and ">
				f.status = #formStatus#
			</isNotEmpty>
			<isNotEmpty property="formUserName" prepend=" and ">
				f.user_name = #formUserName#
			</isNotEmpty>
			<isNotEmpty property="companyName" prepend=" and ">
				p.company_name like concat('%',#companyName#,'%')
			</isNotEmpty>
		</dynamic>
		GROUP BY p.id
		<isNotEmpty property="sortCol" prepend=" order by ">
		    $sortCol$
		       <isNotEmpty property="sortOrder">
		    	 		$sortOrder$
		   		</isNotEmpty>
		</isNotEmpty>
		<isGreaterThan property="pageSize" compareValue="0" prepend="">
			LIMIT #limitStart#,#pageSize#;
		</isGreaterThan>
    </select>
    
   <!-- 评估公司申请单列表统计 -->
	<select id="MS-EXTRA-FORM-ASSETS-COMPANY-APPLY-SEARCH-COUNT" resultClass="long">
		  SELECT count(*) FROM
		f_assess_company_apply p
 		   LEFT JOIN form f ON f.form_id = p.form_id
   		<include refid="projectPermissionSql"/>
		 WHERE 1=1 AND f.status!="DELETED" AND (f.status != 'DRAFT' OR f.user_id = #draftUserId#)
		<dynamic>
	        <isGreaterThan property="formId" compareValue="0" prepend=" and ">
	            p.form_id = #formId#
	        </isGreaterThan>		
			<isNotEmpty property="projectName" prepend=" and ">
				p.project_name like concat('%',#projectName#,'%')
			</isNotEmpty>
			<isNotEmpty property="projectCode" prepend=" and ">
				p.project_code like concat('%',#projectCode#,'%')
			</isNotEmpty>	
			<isNotEmpty property="customerName" prepend=" and ">
				p.customer_name like concat('%',#customerName#,'%')
			</isNotEmpty>		
	         <isNotEmpty property="formStatus" prepend=" and ">
				f.status = #formStatus#
			</isNotEmpty>
			<isNotEmpty property="formUserName" prepend=" and ">
				f.user_name = #formUserName#
			</isNotEmpty>
			<isNotEmpty property="companyName" prepend=" and ">
				p.company_name like concat('%',#companyName#,'%')
			</isNotEmpty>
		</dynamic>
	</select>
	
	<resultMap id="RM-ASSET-SIMPLE" class="com.born.fcs.am.dataobject.AssetSimpleDO">
        <result property="assetsId" column="assets_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="typeId" column="type_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="assetType" column="asset_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="assetTypeDesc" column="asset_type_desc" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="ownershipId" column="ownership_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="ownershipName" column="ownership_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="isCustomer" column="is_customer" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="warrantNo" column="warrant_no" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="evaluationPrice" column="evaluation_price" javaType="com.yjf.common.lang.util.money.Money" jdbcType="BIGINT"/>
        <result property="status" column="status" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="pledgeRate" column="pledge_rate" javaType="double" jdbcType="DECIMAL" nullValue="0"/>
        <result property="mortgagePrice" column="mortgage_price" javaType="com.yjf.common.lang.util.money.Money" jdbcType="BIGINT"/>
        <result property="assetRemarkInfo" column="asset_remark_info" javaType="java.lang.String" jdbcType="TEXT"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>
	
	<!--  尽调查询列表 -->
    <select id="MS-EXTRA-SIMPLE-ASSETS-SEARCH" resultMap="RM-ASSET-SIMPLE">
		SELECT pa.assets_id,pa.type_id,pa.asset_type,pa.asset_type_desc,pa.ownership_id,pa.ownership_name,pa.is_customer,pa.warrant_no,pa.evaluation_price,pa.status,pa.raw_add_time,pa.raw_update_time,ptc.pledge_rate,ptc.mortgage_price,ptc.asset_remark_info 
     	FROM pledge_asset pa 
     	LEFT JOIN pledge_type_common ptc ON ptc.assets_id=pa.assets_id 
		WHERE 1=1 
		<dynamic>
			<isGreaterThan property="typeId"  compareValue="0" prepend=" and ">
	        	pa.type_id = #typeId#
	        </isGreaterThan>		
			<isGreaterThan property="userId"  compareValue="0" prepend=" and ">
	        	pa.user_id = #userId#
	        </isGreaterThan>	        
			<isNotEmpty property="ownershipName" prepend=" and ">
				pa.ownership_name like concat('%',#ownershipName#,'%')
			</isNotEmpty>
			<isNotEmpty property="assetType" prepend=" and ">
				pa.asset_type like concat('%',#assetType#,'%')
			</isNotEmpty>
			<isNotEmpty property="assetRemarkInfo" prepend=" and ">
				ptc.asset_remark_info like concat('%',#assetRemarkInfo#,'%')
			</isNotEmpty>
			<isNotEmpty property="ralateVideo" prepend=" and ">
				pa.ralate_video is null 
			</isNotEmpty>
			<isNotEmpty property="exclusives" prepend=" and ">
             	pa.assets_id NOT IN 
    			<iterate property="exclusives" conjunction="," open="(" close=")">
             		#exclusives[]# 
    			 </iterate>
			</isNotEmpty>	
			<isNotEmpty property="assetsIdList" prepend=" and ">
             	pa.assets_id IN 
    			<iterate property="assetsIdList" conjunction="," open="(" close=")">
             		#assetsIdList[]# 
    			 </iterate>
			</isNotEmpty>			
		</dynamic>
		<isNotEmpty property="sortCol" prepend=" order by ">
		    $sortCol$
		       <isNotEmpty property="sortOrder">
		    	 		$sortOrder$
		   		</isNotEmpty>
		</isNotEmpty>
		<isEmpty property="sortCol" prepend=" ">
		    ORDER BY pa.assets_id DESC 
		</isEmpty>
		<isGreaterThan property="pageSize" compareValue="0" prepend="">
			LIMIT #limitStart#,#pageSize#;
		</isGreaterThan>
    </select>
    
    <!--  尽调查询列表统计 -->
	<select id="MS-EXTRA-SIMPLE-ASSETS-COUNT" resultClass="long">
		SELECT COUNT(pa.assets_id) 
     	FROM pledge_asset pa 
     	LEFT JOIN pledge_type_common ptc ON ptc.assets_id=pa.assets_id 
		WHERE 1=1 
		<dynamic>
			<isGreaterThan property="typeId"  compareValue="0" prepend=" and ">
	        	pa.type_id = #typeId#
	        </isGreaterThan>		
			<isGreaterThan property="userId"  compareValue="0" prepend=" and ">
	        	pa.user_id = #userId#
	        </isGreaterThan>		
			<isNotEmpty property="ownershipName" prepend=" and ">
				pa.ownership_name like concat('%',#ownershipName#,'%')
			</isNotEmpty>
			<isNotEmpty property="assetType" prepend=" and ">
				pa.asset_type like concat('%',#assetType#,'%')
			</isNotEmpty>
			<isNotEmpty property="ralateVideo" prepend=" and ">
				pa.ralate_video is null 
			</isNotEmpty>
			<isNotEmpty property="assetRemarkInfo" prepend=" and ">
				ptc.asset_remark_info like concat('%',#assetRemarkInfo#,'%')
			</isNotEmpty>
			<isNotEmpty property="exclusives" prepend=" and ">
             	pa.assets_id NOT IN 
    			<iterate property="exclusives" conjunction="," open="(" close=")">
             		#exclusives[]# 
    			 </iterate>
			</isNotEmpty>	
				<isNotEmpty property="assetsIdList" prepend=" and ">
             	pa.assets_id IN 
    			<iterate property="assetsIdList" conjunction="," open="(" close=")">
             		#assetsIdList[]# 
    			 </iterate>
			</isNotEmpty>		
		</dynamic>
	</select>
	 <!--驳回的代办任务-->
	<resultMap id="RM-BUSI-BACK-TASK" class="com.born.fcs.am.dataobject.BackTaskDO">
		<result property="formId" column="form_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
		<result property="formCode" column="form_code" javaType="java.lang.String" jdbcType="VARCHAR"/>
		<result property="subject" column="subject" javaType="java.lang.String" jdbcType="VARCHAR"/>
		<result property="taskName" column="taskName" javaType="java.lang.String" jdbcType="VARCHAR"/>
		<result property="creator" column="creator" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="createTime" column="createTime" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="taskStartTime" column="taskStartTime" javaType="java.util.Date" jdbcType="DATETIME"/>
	</resultMap>	
	
	<!-- 驳回的代办任务列表 -->
    <select id="MS-BUSI-BACK-TASK" resultMap="RM-BUSI-BACK-TASK">
		 SELECT
		  f.form_id,
		  f.form_code,
		  f.form_name subject,
		  u.task_name taskName,
		  u.user_name creator,
		  f.raw_update_time createTime,
		  u.task_start_time taskStartTime 
		FROM form f
		  JOIN form_related_user u
		    ON f.form_id = u.form_id
		WHERE f.STATUS = 'BACK'
		AND u.user_type = 'FLOW_SUBMIT_MAN'
		AND u.user_id = #value# order by form_id desc
    </select> 
</sqlMap>
