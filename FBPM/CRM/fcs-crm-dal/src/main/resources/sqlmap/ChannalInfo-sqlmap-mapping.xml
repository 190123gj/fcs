<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- ==========================================================  -->
<!-- Configuration for ibatis sqlmap mapping.                    -->
<!-- ==========================================================  -->

<!-- ============================================================================= -->
<!-- This file is generated by <tt>specialmer-dalgen</tt>, a DAL (Data Access Layer)  -->
<!-- code generation utility specially developed for <tt>rent</tt> project.     -->
<!--                                                                               -->
<!-- PLEASE DO NOT MODIFY THIS FILE MANUALLY, or else your modification may be     -->
<!-- OVERWRITTEN by someone else. To modify the file, you should go to directory   -->
<!-- <tt>(project-home)/biz/dal/src/conf/dalgen</tt>, and find the corresponding   -->
<!-- configuration files. Modify those files according to your needs, then run     -->
<!-- <tt>specialmer-dalgen</tt> to generate this file.                                -->
<!--                                                                               -->
<!-- @author peigen                                                             -->
<!-- ============================================================================= -->

<sqlMap namespace="specialmer">
    <!-- ============================================= -->
    <!-- RESULT MAPS                                   -->
    <!-- ============================================= -->

    <!-- result maps for database table channal_info -->
    <resultMap id="RM-CHANNAL-INFO" class="com.born.fcs.crm.dal.dataobject.ChannalInfoDO">
        <result property="id" column="id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="channelCode" column="channel_code" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="channelName" column="channel_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="channelType" column="channel_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="institutionalAttributes" column="institutional_attributes" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="address" column="address" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="contactPerson1" column="contact_person1" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="contactMobile1" column="contact_mobile1" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="contactPerson2" column="contact_person2" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="contactMobile2" column="contact_mobile2" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="leadings" column="leadings" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="lossAllocationRate" column="loss_allocation_rate" javaType="double" jdbcType="DOUBLE" nullValue="0"/>
        <result property="bondRate" column="bond_rate" javaType="double" jdbcType="DOUBLE" nullValue="0"/>
        <result property="creditAmount" column="credit_amount" javaType="com.yjf.common.lang.util.money.Money" jdbcType="BIGINT"/>
        <result property="creditAmountUsed" column="credit_amount_used" javaType="com.yjf.common.lang.util.money.Money" jdbcType="BIGINT"/>
        <result property="isCreditAmount" column="is_credit_amount" javaType="java.lang.String" jdbcType="ENUM"/>
        <result property="singleLimit" column="single_limit" javaType="com.yjf.common.lang.util.money.Money" jdbcType="BIGINT"/>
        <result property="isSingleLimit" column="is_single_limit" javaType="java.lang.String" jdbcType="ENUM"/>
        <result property="times" column="times" javaType="double" jdbcType="DOUBLE" nullValue="0"/>
        <result property="isTimes" column="is_times" javaType="java.lang.String" jdbcType="ENUM"/>
        <result property="percent" column="percent" javaType="double" jdbcType="DOUBLE" nullValue="0"/>
        <result property="isPercent" column="is_percent" javaType="java.lang.String" jdbcType="ENUM"/>
        <result property="creditStartDate" column="credit_start_date" javaType="java.util.Date" jdbcType="DATETIME"/>
        <result property="creditEndDate" column="credit_end_date" javaType="java.util.Date" jdbcType="DATETIME"/>
        <result property="compensatoryLimit" column="compensatory_limit" javaType="int" jdbcType="INT" nullValue="0"/>
        <result property="dayType" column="day_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="straddleYear" column="straddle_year" javaType="java.lang.String" jdbcType="ENUM"/>
        <result property="enclosureUrl" column="enclosure_url" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="status" column="status" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="inputPerson" column="input_person" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="isTemporary" column="is_temporary" javaType="java.lang.String" jdbcType="ENUM"/>
        <result property="isRemind" column="is_remind" javaType="java.lang.String" jdbcType="ENUM"/>
        <result property="isHistory" column="is_history" javaType="java.lang.String" jdbcType="ENUM"/>
        <result property="contractNo" column="contract_no" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>


    <!-- ============================================= -->
    <!-- mapped statements for IbatisChannalInfoDAO -->
    <!-- ============================================= -->
    <!-- mapped statement for IbatisChannalInfoDAO.insert -->
    <insert id="MS-CHANNAL-INFO-INSERT">
        INSERT /*MS-YRD-CHANNAL-INFO-INSERT*/ INTO channal_info(id,channel_code,contract_no,channel_name,channel_type,institutional_attributes,address,contact_person1,contact_mobile1,contact_person2,contact_mobile2,leadings,loss_allocation_rate,bond_rate,credit_amount,credit_amount_used,is_credit_amount,single_limit,is_single_limit,times,is_times,percent,is_percent,credit_start_date,credit_end_date,compensatory_limit,day_type,straddle_year,enclosure_url,STATUS,input_person,is_temporary,is_remind,is_history,raw_add_time) VALUES (#id#, #channelCode#,#contractNo#, #channelName#, #channelType#, #institutionalAttributes#, #address#, #contactPerson1#, #contactMobile1#, #contactPerson2#, #contactMobile2#, #leadings#, #lossAllocationRate#, #bondRate#, #creditAmount.cent#, #creditAmountUsed.cent#, #isCreditAmount#, #singleLimit.cent#, #isSingleLimit#, #times#, #isTimes#, #percent#, #isPercent#, #creditStartDate#, #creditEndDate#, #compensatoryLimit#, #dayType#, #straddleYear#, #enclosureUrl#, #status#, #inputPerson#, #isTemporary#, #isRemind#, #isHistory#, #rawAddTime#)				
				<selectKey  resultClass ="long"  keyProperty ="id" >   
			         SELECT LAST_INSERT_ID() AS ID 
			    </selectKey>
    </insert>

    <!-- mapped statement for IbatisChannalInfoDAO.findById -->
    <select id="MS-CHANNAL-INFO-FIND-BY-ID" resultMap="RM-CHANNAL-INFO">
    <![CDATA[
        select /*MS-YRD-CHANNAL-INFO-FIND-BY-ID*/ id, channel_code, contract_no, channel_name, channel_type, institutional_attributes, address, contact_person1, contact_mobile1, contact_person2, contact_mobile2, leadings, loss_allocation_rate, bond_rate, credit_amount, credit_amount_used, is_credit_amount, single_limit, is_single_limit, times, is_times, percent, is_percent, credit_start_date, credit_end_date, compensatory_limit, day_type, straddle_year, enclosure_url, status, input_person, is_temporary, is_remind, is_history, raw_add_time, raw_update_time from channal_info where (id = #value#)
    ]]>
    </select>

    <!-- mapped statement for IbatisChannalInfoDAO.findMaxCode -->
    <select id="MS-CHANNAL-INFO-FIND-MAX-CODE" resultClass="java.lang.String">
    <![CDATA[
        select /*MS-YRD-CHANNAL-INFO-FIND-MAX-CODE*/ MAX(channel_code) from channal_info where (channel_type = #value#)
    ]]>
    </select>

    <!-- mapped statement for IbatisChannalInfoDAO.deleteById -->
    <delete id="MS-CHANNAL-INFO-DELETE-BY-ID">
    <![CDATA[
        delete /*MS-YRD-CHANNAL-INFO-DELETE-BY-ID*/ from channal_info where (id = #value#)
    ]]>
    </delete>

    <!-- mapped statement for IbatisChannalInfoDAO.deleteByChannelCode -->
    <delete id="MS-CHANNAL-INFO-DELETE-BY-CHANNEL-CODE">
    <![CDATA[
        delete /*MS-YRD-CHANNAL-INFO-DELETE-BY-CHANNEL-CODE*/ from channal_info where (channel_code = #value#)
    ]]>
    </delete>

    <!-- mapped statement for IbatisChannalInfoDAO.updateById -->
    <update id="MS-CHANNAL-INFO-UPDATE-BY-ID">
    <![CDATA[
        update /*MS-YRD-CHANNAL-INFO-UPDATE-BY-ID*/ channal_info set channel_code=#channelCode#, contract_no=#contractNo#, channel_name=#channelName#, channel_type=#channelType#, institutional_attributes=#institutionalAttributes#, address=#address#, contact_person1=#contactPerson1#, contact_mobile1=#contactMobile1#, contact_person2=#contactPerson2#, contact_mobile2=#contactMobile2#, leadings=#leadings#, loss_allocation_rate=#lossAllocationRate#, bond_rate=#bondRate#, credit_amount=#creditAmount.cent#, credit_amount_used=#creditAmountUsed.cent#, is_credit_amount=#isCreditAmount#, single_limit=#singleLimit.cent#, is_single_limit=#isSingleLimit#, times=#times#, is_times=#isTimes#, percent=#percent#, is_percent=#isPercent#, credit_start_date=#creditStartDate#, credit_end_date=#creditEndDate#, compensatory_limit=#compensatoryLimit#, day_type=#dayType#, straddle_year=#straddleYear#, enclosure_url=#enclosureUrl#, status=#status#, input_person=#inputPerson#, is_temporary=#isTemporary#, is_remind=#isRemind#, is_history=#isHistory# where (id = #id#)
    ]]>
    </update>

    <!-- mapped statement for IbatisChannalInfoDAO.updateCreditAmountUsedById -->
    <update id="MS-CHANNAL-INFO-UPDATE-CREDIT-AMOUNT-USED-BY-ID">
    <![CDATA[
        update /*MS-YRD-CHANNAL-INFO-UPDATE-CREDIT-AMOUNT-USED-BY-ID*/ channal_info set credit_amount_used=#creditAmountUsed.cent# where (id = #id#)
    ]]>
    </update>

    <!-- mapped statement for IbatisChannalInfoDAO.updateRemindStatus -->
    <update id="MS-CHANNAL-INFO-UPDATE-REMIND-STATUS">
    <![CDATA[
        update /*MS-YRD-CHANNAL-INFO-UPDATE-REMIND-STATUS*/ channal_info set is_remind=#isRemind# where (id = #id#)
    ]]>
    </update>

    <!-- mapped statement for IbatisChannalInfoDAO.updateStatusById -->
    <update id="MS-CHANNAL-INFO-UPDATE-STATUS-BY-ID">
    <![CDATA[
        update /*MS-YRD-CHANNAL-INFO-UPDATE-STATUS-BY-ID*/ channal_info set status=#status# where (id = #id#)
    ]]>
    </update>

    <!-- mapped statement for IbatisChannalInfoDAO.updateStatusByChannalCode -->
    <update id="MS-CHANNAL-INFO-UPDATE-STATUS-BY-CHANNAL-CODE">
    <![CDATA[
        update /*MS-YRD-CHANNAL-INFO-UPDATE-STATUS-BY-CHANNAL-CODE*/ channal_info set status=#status# where (channel_code = #channelCode#)
    ]]>
    </update>

    <!-- mapped statement for IbatisChannalInfoDAO.updateHistoryStatusByChannalCode -->
    <update id="MS-CHANNAL-INFO-UPDATE-HISTORY-STATUS-BY-CHANNAL-CODE">
    <![CDATA[
        update /*MS-YRD-CHANNAL-INFO-UPDATE-HISTORY-STATUS-BY-CHANNAL-CODE*/ channal_info set is_history=#isHistory# where (channel_code = #channelCode#)
    ]]>
    </update>

    <!-- mapped statement for IbatisChannalInfoDAO.findAllByChannelCodeOrId -->
    <select id="MS-CHANNAL-INFO-FIND-ALL-BY-CHANNEL-CODE-OR-ID" resultMap="RM-CHANNAL-INFO">
        SELECT /*MS-YRD-CHANNAL-INFO-FIND-ALL-BY-CHANNEL-CODE-OR-ID*/  id ,channel_code ,contract_no,channel_name ,channel_type ,institutional_attributes ,address ,contact_person1 ,contact_mobile1 ,contact_person2 ,contact_mobile2 ,leadings ,loss_allocation_rate ,bond_rate ,credit_amount ,credit_amount_used ,is_credit_amount ,single_limit ,is_single_limit ,times ,is_times ,percent ,is_percent ,credit_start_date ,credit_end_date ,compensatory_limit ,day_type ,straddle_year ,enclosure_url ,status ,input_person ,is_temporary ,is_remind ,is_history ,raw_add_time ,raw_update_time  FROM channal_info 
				<dynamic prepend="where">
					<isNotEmpty property="channelCode" prepend=" and ">
                       channel_code = #channelCode#
                   	</isNotEmpty>
                   	<isGreaterThan property="id" prepend=" and " compareValue="0">
                       channel_code =  (SELECT channel_code FROM channal_info WHERE id=#id# )
                   	</isGreaterThan>     	
				</dynamic>	
				order by raw_add_time DESC
    </select>

    <!-- mapped statement for IbatisChannalInfoDAO.findWithCondition -->
    <select id="MS-CHANNAL-INFO-FIND-WITH-CONDITION" resultMap="RM-CHANNAL-INFO">
        SELECT /*MS-YRD-CHANNAL-INFO-FIND-WITH-CONDITION*/  id ,channel_code ,contract_no,channel_name ,channel_type ,institutional_attributes ,address ,contact_person1 ,contact_mobile1 ,contact_person2 ,contact_mobile2 ,leadings ,loss_allocation_rate ,bond_rate ,credit_amount ,credit_amount_used ,is_credit_amount ,single_limit ,is_single_limit ,times ,is_times ,percent ,is_percent ,credit_start_date ,credit_end_date ,compensatory_limit ,day_type ,straddle_year ,enclosure_url ,status ,input_person ,is_temporary ,is_remind ,is_history ,raw_add_time ,raw_update_time  FROM channal_info 
				<dynamic prepend="where">
					<isNotEmpty property="channalInfo.channelCode" prepend=" and ">
                       channel_code = #channalInfo.channelCode#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.channelName" prepend=" and ">
                       channel_name = #channalInfo.channelName#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.status" prepend=" and ">
                       status = #channalInfo.status#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.channelType" prepend=" and ">
                       channel_type = #channalInfo.channelType#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.institutionalAttributes" prepend=" and ">
                       institutional_attributes = #channalInfo.institutionalAttributes#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.isTemporary" prepend=" and ">
                       is_temporary = #channalInfo.isTemporary#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.inputPerson" prepend=" and ">
                       input_person = #channalInfo.inputPerson#
                   	</isNotEmpty>
                   <isNotEmpty property="channalInfo.isRemind" prepend=" and ">
                       is_remind = #channalInfo.isRemind#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.creditEndDate" prepend=" and ">
                      #channalInfo.creditEndDate# >= credit_end_date
                   	</isNotEmpty>
                   	 <isNotEmpty property="likeCodeOrName" prepend=" and ">
                      ( channel_name like concat('%', #likeCodeOrName# ,'%')  or channel_code like concat('%', #likeCodeOrName# ,'%') )
                   	</isNotEmpty>
                   	<isNotEmpty property="likeChannelName" prepend=" and ">
                       channel_name like concat('%', #likeChannelName# ,'%')
                   	</isNotEmpty>
                   	<isNotEmpty property="likeChannelCode" prepend=" and ">
                       channel_code like concat('%', #likeChannelCode#,'%')
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.isHistory" prepend=" and ">
                       is_history = #channalInfo.isHistory#
                   	</isNotEmpty>        	
				</dynamic>	
				order by raw_update_time DESC
			    LIMIT #limitStart#,#pageSize#;
    </select>

    <!-- mapped statement for IbatisChannalInfoDAO.countWithCondition -->
    <select id="MS-CHANNAL-INFO-COUNT-WITH-CONDITION" resultClass="long">
        SELECT /*MS-YRD-CHANNAL-INFO-COUNT-WITH-CONDITION*/  count(*) FROM channal_info
				<dynamic prepend="where">
					<isNotEmpty property="channalInfo.channelCode" prepend=" and ">
                       channel_code = #channalInfo.channelCode#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.channelName" prepend=" and ">
                       channel_name = #channelName#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.status" prepend=" and ">
                       status = #channalInfo.status#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.channelType" prepend=" and ">
                       channel_type = #channalInfo.channelType#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.institutionalAttributes" prepend=" and ">
                       institutional_attributes = #channalInfo.institutionalAttributes#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.isTemporary" prepend=" and ">
                       is_temporary = #channalInfo.isTemporary#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.inputPerson" prepend=" and ">
                       input_person = #channalInfo.inputPerson#
                   	</isNotEmpty> 	
                   	<isNotEmpty property="channalInfo.isRemind" prepend=" and ">
                       is_remind = #channalInfo.isRemind#
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.creditEndDate" prepend=" and ">
                      #channalInfo.creditEndDate# >= credit_end_date
                   	</isNotEmpty>
                   	<isNotEmpty property="likeCodeOrName" prepend=" and ">
                     (  channel_name like concat('%', #likeCodeOrName# ,'%')  or channel_code like concat('%', #likeCodeOrName# ,'%'))
                   	</isNotEmpty>
                   	<isNotEmpty property="likeChannelName" prepend=" and ">
                       channel_name like concat('%', #likeChannelName# ,'%')
                   	</isNotEmpty>
                   	<isNotEmpty property="likeChannelCode" prepend=" and ">
                       channel_code like concat('%', #likeChannelCode#,'%')
                   	</isNotEmpty>
                   	<isNotEmpty property="channalInfo.isHistory" prepend=" and ">
                       is_history = #channalInfo.isHistory#
                   	</isNotEmpty> 
				</dynamic>
    </select>

</sqlMap>
